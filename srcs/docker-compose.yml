    version: '3.8'
    
    services:
      mariadb:
        build: ./requirements/mariadb
        container_name: mariadb
        restart: always
        environment:
          MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
          MYSQL_DATABASE: ${MYSQL_DATABASE}
          MYSQL_USER: ${MYSQL_USER}
          MYSQL_PASSWORD: ${MYSQL_PASSWORD}
        volumes:
          - mariadb_data:/var/lib/mysql
        networks:
          - inception
    
      wordpress:
        build: ./requirements/wordpress
        container_name: wordpress
        restart: always
        environment:
          MYSQL_DATABASE: ${MYSQL_DATABASE}
          MYSQL_USER: ${MYSQL_USER}
          MYSQL_PASSWORD: ${MYSQL_PASSWORD}
          WP_ADMIN_USER: ${WP_ADMIN_USER}
          WP_ADMIN_PASSWORD: ${WP_ADMIN_PASSWORD}
          WP_ADMIN_EMAIL: ${WP_ADMIN_EMAIL}
          WP_USER: ${WP_USER}
          WP_USER_PASSWORD: ${WP_USER_PASSWORD}
          WP_USER_EMAIL: ${WP_USER_EMAIL}
          DOMAIN_NAME: ${DOMAIN_NAME}
        volumes:
          - wordpress_data:/var/www/html
        networks:
          - inception
        depends_on:
          - mariadb
    
      nginx:
        build: ./requirements/nginx
        container_name: nginx
        restart: always
        ports:
          - "443:443"
        volumes:
          - wordpress_data:/var/www/html
        networks:
          - inception
        depends_on:
          - wordpress
    
    volumes:
      mariadb_data:
        driver: local
        driver_opts:
          type: none
          o: bind
          device: /home/${USER}/data/mariadb
    
      wordpress_data:
        driver: local
        driver_opts:
          type: none
          o: bind
          device: /home/${USER}/data/wordpress
    
    networks:
      inception:
        driver: bridge
